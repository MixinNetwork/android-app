package crypto

import (
	"encoding/hex"
	"testing"

	"github.com/stretchr/testify/assert"
)

func TestRecoverSignature(t *testing.T) {
	partials := "000672f4fa337710610a029386db47f0f04073ed83445635f3083cff2fa2fc798a7a078444a62a12a7343a5bdc23d97e4ed0b509802592470c9cbadaaf55088c7cce,00001730715ccff97f66377ce70f17b16cd386ff64c1cff19402cc6cd0af63fdd625469143499e0101795f3943c3edfb7e1cf5a8e599b078afd2beb8ebde99773357,00010d9e382e3d3145598b0ac0558fb573c955d60e35d8d30024d6c76233528988b41f47e3182376b7c77df842bc012eff977293c026a7e6921a4952907cd5e07ef3,0002589a9f3d8f92111fdf32e3c542279aac9a4fdcf056822166166cdcda7af71ab222b566ff10b2d0596944564f7f4b2189bae64ceaa882f87301806b4f98a77d01,00030a5d291188c798f8ba816cbd980bbaef10abdf3bd2679109adbc8fef0294b25a1b0b8053a0332c889c49ebee02ac17d3518fda805b76f9302d7998eae6710262,00047d0924c11c91fa11af803328c4ea3bc22dc0d1b5513327dfba97031a50f32c966ee99a618808b2ffa75a8ba860e9a72d3f7733765a193f206d1e43a143f23050,0005005047f969b9ebf101beeb4280f6a281ba5391b91000971f960e006ca3c7ad4f5f2e871b8d3ae83ca9d485d4a499be144f0f1ca0b479a84e1fbb4f3aaaa81426"
	commitments := "5HYSNEcudZqucSo8tjVkkkuz6QiTQPSCjSxdGY9gZ1V3JKGtJ5bfZXS3QbB8AnBPLVrJQLEyJaucw4S6MmJhkwTpqCpTiovjiiaab4PUZsS8NBUBFharae9R3QUMR9ouPTgFxqmqMGGXSAqrRziSqneTcEkgLymx5oahxGfSeovgTN1FDgKiAt,5Jr6mXiEF1xtR7jJ8o2923vsGcqnjnegK9eVybDfXCnFXKhRVaJDCMHvGuHLo92TWSuBVrwDxYM8nHDiqYVb7csPQHHTyPjrGMPZiPe3PFhBYpz5nsDeVxjknZ8C9fPYYi67qyBy4fy1T6U4itXQEzjCTBdtjw2TXrNKe5oYPvJWx3X6ZpygCi,5JTnSpeBG9NyBAEkXL6KxFW3fYMhM4rgBqLMXynrBxHcshuQViedG2H4UumcdLZzMjkyyAdsGmEAf4MKiULmN93aaNvqCXiHH7MYnyvGp96s9bXs2M61HgH1KKZ4Tvk6yBfnVmvwmGVnnsQMd7fTky37VZGqn56SkQa7ANEz52Bwfs7uBBVZzV,5JDXsF4qPcf9cwKuAL2H4scnaMEz3GYnyM3koVx5AE7rDvaLCeqWZ8ksXES9eQooKtfQHZyxhhFZumrQqkMqsbxatYSvZJFSWtTESoBqGSqb9F2pvQboik1uJyw7VNrDFUkvVj64JXY6cThHvWQpK96zqELurNjfEPjNRB79c5ESqqfK4FXtce,5Jr8U6gPzoi9iYLRY4bVJBbYfsk95xM7AUyMhrsXzfG16nzkzcR2LpEsPFeYwS75WCDMGVta55SDWjb1cRPmWVKrKvr9A8RKRJkF3yop9gc2Kia4bccYqH1QcnNZAGoDLcqHiLSgbWwvjb1NaS2vVtUHsfnbKAQ64jX96gSMJis39UEh9HJiiA"
	assignor, _ := hex.DecodeString("5445292d1a1095b708d81921cd49060798bcafffee9cea829da3bc0b323ddcc75683a5fe449e6e4def8ceb628af0dd1fb459288472dbe1a6405e6bdbfefe5bc03311e0ab8e257faf5d6985f4fb8355deba1b922c4ce9f24f68dfd32311b4e5db5ae4a0a2366a47f795f36a0ca8eb24166991406058be7f30c19db48ef7974889")
	sig, err := RecoverSignature(partials, commitments, assignor, 7)
	assert.Nil(t, err)
	t.Logf("sig %s", hex.EncodeToString(sig))
}
